<div class="mt-3">
  <a href='javascript:history.back()'>
  <strong class="text-info">回上一頁</strong>
</a>
</div>
<br />
<br />
<form
  action="/users/{{user.id}}/edit"
  method='POST'
  enctype='multipart/form-data'
>
  <div class='row mt-5'>
    <div class='col-md-4 display-flex justify-content-center'>
      <div class='form-group'>
        <label for='avatar'>
          <img
            id="user-avatar"
            src="{{user.avatar}}"
            alt="{{user.name}}"
            width='200px'
            height='200px'
            class='mb-3 rounded'
            style="border: solid 7px white"
            accept='image/png, image/jpeg'
          />
        </label>
        <br/>
        <label>
          <input type='file' class='form-control-file' id='avatar' name='avatar' />
        </label>
      </div>
    </div>
    <div class='col-md-8'>
      <div class='form-group'>
        <input
          type='text'
          class='form-control form-control-lg'
          name='name'
          id='name'
          placeholder='Name'
          value="{{user.name}}"
          required
        />
      </div>
      <div class='form-group'>
        <textarea
          class='form-control'
          name='introduction'
          id='introduction'
          rows='8'
          placeholder='Type anything about you here...'
        >{{user.introduction}}</textarea>
      </div>
      <button type='submit' class='btn btn-primary float-right mt-5'>
        Update
      </button>
    </div>
  </div>
</form>

<script src='http://code.jquery.com/jquery-1.10.1.min.js'></script>
<script>
  $(document).ready(function () {
    let readURL = function (input) {
      if (input.files && input.files[0]) {
        let reader = new FileReader();
        reader.onload = function (e) {
          $("#user-avatar").attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $("#avatar").change(function () {
      readURL(this);
    });
  })
</script>
